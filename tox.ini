# By default, only scenarios that are executed against Docker
# drivers are tested by this call. If you want to test openstack
# scenarios, then that will be added at a later date
[tox]
minversion = 2.0
skipsdist = true
envlist = lint_all
requires = tox-ansible>=1.5

[ansible]
molecule_opts =
molecule_config_files =
    {toxinidir}/tests/molecule.yml
ansible_lint_config = {toxinidir}/tests/ansible-lint.yml
yamllint_config = {toxinidir}/tests/yamllint.yml

[flake8]
exclude =
  .tox,
  .cache

[testenv]
parallel_show_output = true
usedevelop = false
skip_install = true
passenv =
    TERM
setenv =
  ANSIBLE_COLLECTIONS_PATH={envdir}/ansible
deps =
  #molecule!=3.4.0,!=3.5.0a0,!=3.5.1
  git+https://github.com/greg-hellings/molecule.git@restore_collections_path
